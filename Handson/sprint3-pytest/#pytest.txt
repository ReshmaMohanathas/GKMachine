import pytest
import pickle
import keyword


'''
Write the fixture function unpick which reads the pickle file "file.pickle" and return the list of words
Mark the function as fixture
Open the file "file.pickle" with "rb" and load the data using pickle.load function
'''
@pytest.fixture
def unpick():
    file=open("file.pickle","rb")
    data=pickle.load(file)
    return data
    
'''
Write the test method test1 to check whether the count of words is equal to 6720
'''

def test1(unpick):
    assert len(unpick)==6720
    
    


'''
Write the test method test_len_endswith to check whether the count of words ending with 'ing' is greater than 350
'''
def test_len_endswith(unpick):
    count=0
    for i in unpick:
            if(i[-3:].lower()=="ing"):
                count+=1
    assert count>350
    



'''
Write the test method test_len_lessthan to check whether the count of words having characters less than 3 is equalto 80
'''
def test_len_lessthan(unpick):
    count=0
    for i in unpick:
        if(len(i)<3):
            count+=1
    assert count==80

'''
Write the test method test_keyword to check whether the count of keywords present in the list are not equal to zero 
Hint Use keyword keyword function of library keyword.
'''
def test_keyword(unpick):
    count=0
    for i in unpick:
        if(keyword.iskeyword(i)):
            count+=1
    assert count!=0 
    


'''
Write the test method test_word to check whether the word "jupyter" is present in the list
'''

def test_word(unpick):
            assert "jupiter" in unpick

'''
Write the test method test_len_startswith to check whether the count of words that starts with character 'c' is equal to 700
'''
def test_len_startswith(unpick):
    count=0
    for i in unpick:
        if(i[0].lower()=="c"):
            count+=1
    assert count==700

'''
Write the test method test_words_ag to check the count of words that starts with 'a' and endwith 'g' is a two digit number and the second digit is zero
'''
def test_words_ag(unpick):
    count=0
    for i in unpick:
        if(i[0]=="a" and i[-1]=="g"):
            count+=1
    assert len(str(count))==2 and str(count)[-1]=="0"



'''
Write the test method char_words to check the whether count of words having alphabets only is greater than 6400
'''  
def char_words(unpick):
    count=0
    for i in unpick:
        if(i.isalpha()):
            count+=1
    assert count==6400

'''
Write the parameterized test method test_words_starts_with to run against a set of multiple inputs
Mark the function as parameterize
Write the function to check the count of words starting with the input character is equal to the output
[('a',570),('e',327),('h',1296),('t',321)] is the set of inputs and outputs
'''

@pytest.mark.parametrize("test_input,expected", [('a',570),('e',327),('h',1296),('t',321)])
def test_words_starts_with(unpick,test_input, expected):
    a=0
    e=0	
    h=0
    t=0
    for i in unpick:
        if(i[0].lower()=='a'):
            a+=1
        elif(i[0].lower()=='e'):
            e+=1
        elif(i[0].lower()=='h'):
            h+=1
        elif(i[0].lower()=='t'):
            t+=1
    assert eval(test_input) == expected
    